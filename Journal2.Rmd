---
title: "WG Ch4 & Ch5 Exercise Solutions"
author: Rachel Lee
output:
  html_document:
    toc: true
    toc_float: true
    collapsed: false
    number_sections: false
    toc_depth: 3
    #code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message=FALSE,warning=FALSE, cache=TRUE)
library(kableExtra)
options(knitr.table.format = "latex")
```

Last compiled: `r Sys.time()`

<br>

*For Week 4: read WG chapters 4-5.*  

*Thank you Jean for catching some typos last week :)*

<br>
<br>

# Chapter 4
<br>

### 4.4 Exercises

#### 1. Why does this code not work?
```{r}
my_variable <- 10
my_varıable
#> Error in eval(expr, envir, enclos): object 'my_varıable' not found
```

If you look carefully, `my_variable` is different from `my_varıable`. Reading the error messages help: `object 'my_varıable' not found` is very clear on where R is finding the error.  

<br>
<br>

#### 2. Tweak each of the following R commands so that they run correctly.

The corrected code should look like this:

```{r}
library(tidyverse)

# spelling mistake; change to data
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy))

# set cyl == 8
filter(mpg, cyl == 8)

# data name is diamonds, not diamond
filter(diamonds, carat > 3)
```

<br>
<br>

#### 3. Press Alt + Shift + K. What happens? How can you get to the same place using the menus?  

This gives a menu with keyboard shortcuts. You can also access htem in the menu under `Tools -> Keyboard Shortcuts Help`.

<br>
<br>
<br>

# Chapter 5

### 5.2 Exercises
```{r}
library(nycflights13)
library(tidyverse)
```
#### 1. Find all flights that

1. Had an arrival delay of two or more hours
```{r}
filter(flights, arr_delay >= 120)
```
<br>

2. Flew to Houston (IAH or HOU)
```{r}
filter(flights, dest == "IAH" | dest == "HOU")
```

If you have been practicing on DataCamp, you may have this code below that also produces the same output:
```{r}
filter(flights, dest %in% c("IAH", "HOU"))
```
<br>

3. Were operated by United, American, or Delta  

You first need to look up the abbreviations for airlines.
```{r}
airlines
```

Now using the carrier codes, we can find those operated by the three specified airlines:
```{r}
filter(flights, carrier %in% c("AA", "DL", "UA"))
```
<br>

4. Departed in summer (July, August, and September)

Any one of the four codes will produce the same output. *Note: my outputs are suppressed using the rmd function `results = FALSE`.*
```{r results = FALSE}
filter(flights, month >= 7 & month <= 9)
filter(flights, month %in% 7:9)
filter(flights, month >= 7, month <= 9)
filter(flights, month == 7 | month == 8 | month == 9)
```
<br>

5. Arrived more than two hours late, but didn’t leave late
```{r}
filter(flights, arr_delay > 120 & dep_delay <= 0)
```
<br>

6. Were delayed by at least an hour, but made up over 30 minutes in flight
```{r}
filter(flights, dep_delay >= 60, dep_delay - arr_delay > 30)
```

<br>

7. Departed between midnight and 6am (inclusive)
```{r}
filter(flights, dep_time == 2400 | dep_time <= 600)
```
<br>
<br>

#### 2. Another useful dplyr filtering helper is `between()`. What does it do? Can you use it to simplify the code needed to answer the previous challenges?

`?between()` shows the usage. It takes 3 arguments: `x`, `left`, and `right`. Try running `between(1:12, 7, 9)`:
```{r}
between(1:12, 7, 9)
```

We can use this function to simploy the previous question:
```{r}
filter(flights, between(month, 7, 9))
```

<br>
<br>

#### 3. How many flights have a missing `dep_time`? What other variables are missing? What might these rows represent?

We can use `is.na()` function. DataCamp covers this function with numerous examples.
```{r}
flights %>% filter(is.na(dep_time))
flights %>% filter(is.na(dep_time)) %>% count()
```
From the given output table, `arr_time` and `dep_delay` are also missing. There are 8255 flights with missing `dep_time`.  

<br>
<br>

#### 4. Why is `NA ^ 0` not missing? Why is `NA | TRUE` not missing? Why is `FALSE & NA` not missing? Can you figure out the general rule? (`NA * 0` is a tricky counterexample!)

<br>
<br>

### 5.3 Exercises

#### 1. How could you use `arrange()` to sort all missing values to the start? (Hint: use `is.na()`).

<br>
<br>

#### 2. Sort flights to find the most delayed flights. Find the flights that left earliest.

<br>
<br>

#### 3. Sort flights to find the fastest (highest speed) flights.

<br>
<br>

#### 4. Which flights travelled the farthest? Which travelled the shortest?



